self.webpackChunkRemoteClient([19,143],{101:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return j}));var i=r(24),s=r(6),a=r(25),n=r(31),o=r(30),l=r(95),c=r(2),u=r(129),d=r(8),p=r(21);class h{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(n.a),this._values=new Map}clone(e){const t=new h,r=this._originStores[0];r&&r.forEach((e,r)=>{t.set(r,Object(d.a)(e),0)});for(let r=2;r<n.a;r++){const i=this._originStores[r];i&&i.forEach((i,s)=>{e&&e.has(s)||t.set(s,Object(d.a)(i),r)})}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?Object(p.f)(t):[]}set(e,t,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||Object(c.c)(this._propertyOriginMap.get(e))<=r){const i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=6){const r=this._originStores[t];if(!r)return;const i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],i=r&&r.get(e),s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),s!==i}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var b=h;const y=e=>{let t=class extends e{constructor(...e){super(...e);const t=Object(c.c)(Object(s.a)(this)),r=t.metadatas,i=t.store,a=new b;t.store=a,i.keys().forEach(e=>{a.set(e,i.get(e),0)}),Object.keys(r).forEach(e=>{t.internalGet(e)&&a.set(e,t.internalGet(e),0)})}read(e,t){Object(u.a)(this,e,t)}getAtOrigin(e,t){const r=g(this),i=Object(n.d)(t);if("string"==typeof e)return r.get(e,i);const s={};return e.forEach(e=>{s[e]=r.get(e,i)}),s}originOf(e){return Object(n.b)(this.originIdOf(e))}originIdOf(e){return g(this).originOf(e)}revert(e,t){const r=g(this),i=Object(n.d)(t),a=Object(s.a)(this);let o;o="string"==typeof e?"*"===e?r.keys(i):[e]:e,o.forEach(e=>{a.propertyInvalidated(e),r.revert(e,i),a.propertyCommitted(e)})}};return t=Object(i.a)([Object(a.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function g(e){return Object(s.a)(e).store}let f=class extends(y(o.a)){};f=Object(i.a)([Object(a.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],f);const O=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return m(this).delete(e,Object(n.d)(t))}write(e={},t){return Object(l.b)(this,e=e||{},t),e}setAtOrigin(e,t,r){Object(s.a)(this).setAtOrigin(e,t,Object(n.d)(r))}removeOrigin(e){const t=m(this),r=Object(n.d)(e),i=t.keys(r);for(const e of i)t.originOf(e)===r&&t.set(e,t.get(e,r),6)}updateOrigin(e,t){const r=m(this),i=Object(n.d)(t),s=this.get(e);for(let t=i+1;t<n.a;++t)r.delete(e,t);r.set(e,s,i)}toJSON(e){return this.write({},e)}};return t=Object(i.a)([Object(a.a)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function m(e){return Object(s.a)(e).store}const v=e=>{let t=class extends(O(y(e))){constructor(...e){super(...e)}};return t=Object(i.a)([Object(a.a)("esri.core.MultiOriginJSONSupport")],t),t};let j=class extends(v(o.a)){};j=Object(i.a)([Object(a.a)("esri.core.MultiOriginJSONSupport")],j)},111:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var i=r(24),s=(r(3),r(20),r(7)),a=(r(9),r(26)),n=r(68),o=r(25),l=r(66),c=r(10),u=r(4),d=(r(41),r(5)),p=(r(42),r(91)),h=r(117);const b=s.a.getLogger("esri.layers.mixins.PortalLayer"),y=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]}}destroy(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new h.default({id:t.itemId,portal:r&&r.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const i=await r.e(69).then(r.bind(null,217));return Object(d.t)(t),await i.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)}catch(e){throw b.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t&&t.portal,i=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||p.a.getDefault());return r&&i&&!Object(u.q)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new c.a("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return Object(i.a)([Object(a.b)({type:h.default})],t.prototype,"portalItem",null),Object(i.a)([Object(n.a)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),Object(i.a)([Object(l.a)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),Object(i.a)([Object(a.b)()],t.prototype,"resourceReferences",void 0),t=Object(i.a)([Object(o.a)("esri.layers.mixins.PortalLayer")],t),t}},118:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(24),s=(r(3),r(20),r(7),r(9),r(26)),a=r(25),n=r(66),o=r(10),l=(r(4),r(41),r(42),r(129)),c=r(95);const u={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0,WMS:!0,KML:!0,RasterDataLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISFeatureLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0,CSV:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,VectorTileLayer:!0,WFS:!0,SubtypeGroupLayer:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};var d=r(85);const p=e=>{let t=class extends e{constructor(){super(...arguments),this.title="Layer"}writeListMode(e,t,r,i){(i&&"ground"===i.layerContainerType||e&&Object(c.a)(this,r,{},i))&&(t[r]=e)}writeOperationalLayerType(e,t,r,i){!e||i&&"tables"===i.layerContainerType||(t.layerType=e)}writeTitle(e,t){t.title=e||"Layer"}read(e,t){t&&(t.layer=this),Object(l.b)(this,e,t=>super.read(e,t),t)}write(e,t){if(t&&t.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=u[e];let i=r&&r[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(i=!1),!i)return t.messages&&t.messages.push(new o.a("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const r=super.write(e,{...t,layer:this}),i=!!t&&!!t.messages&&!!t.messages.filter(e=>e instanceof o.a&&"web-document-write:property-required"===e.name).length;return!this.url&&i?null:r}beforeSave(){}};return Object(i.a)([Object(s.b)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),Object(i.a)([Object(s.b)({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),Object(i.a)([Object(n.a)("listMode")],t.prototype,"writeListMode",null),Object(i.a)([Object(s.b)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),Object(i.a)([Object(n.a)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),Object(i.a)([Object(s.b)(d.e)],t.prototype,"opacity",void 0),Object(i.a)([Object(s.b)({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,allowNull:!0}},"portal-item":{write:!1}}}})],t.prototype,"title",void 0),Object(i.a)([Object(n.a)("title")],t.prototype,"writeTitle",null),Object(i.a)([Object(s.b)({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],t.prototype,"visible",void 0),t=Object(i.a)([Object(a.a)("esri.layers.mixins.OperationalLayer")],t),t}},135:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r(24),s=(r(3),r(20),r(7)),a=(r(9),r(26)),n=r(25),o=(r(4),r(41),r(42),r(92));const l=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=Object(o.e)(this.url);if(e&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",Object(o.f)(e,s.a.getLogger(this.declaredClass)))}};return Object(i.a)([Object(a.b)({dependsOn:["url"]})],t.prototype,"title",null),Object(i.a)([Object(a.b)({type:String})],t.prototype,"url",null),t=Object(i.a)([Object(n.a)("esri.layers.mixins.ArcGISService")],t),t}},146:function(e,t,r){"use strict";var i,s=r(24),a=(r(3),r(20),r(2)),n=(r(7),r(9),r(26)),o=r(67),l=r(68),c=r(25),u=r(66),d=(r(4),r(41),r(42),r(65)),p=r(82);let h=i=class extends d.a{async collectRequiredFields(e,t){return Object(p.a)(e,t,this.expression)}clone(){return new i({expression:this.expression,title:this.title})}};Object(s.a)([Object(n.b)({type:String,json:{write:!0}})],h.prototype,"expression",void 0),Object(s.a)([Object(n.b)({type:String,json:{write:!0}})],h.prototype,"title",void 0),h=i=Object(s.a)([Object(c.a)("esri.layers.support.FeatureExpressionInfo")],h);var b=h,y=r(192);const g=function(){const e=Object.keys(y.a);return e.sort(),e}();var f;const O=Object(o.b)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),m=new o.a({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let v=f=class extends d.a{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write(null,i),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){return this._isOverridden("mode")?this._get("mode"):Object(a.h)(this.offset)||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new f({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};Object(s.a)([Object(n.b)({type:b,json:{write:!0}})],v.prototype,"featureExpressionInfo",void 0),Object(s.a)([Object(l.a)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],v.prototype,"readFeatureExpressionInfo",null),Object(s.a)([Object(u.a)("featureExpressionInfo",{featureExpressionInfo:{type:b},"featureExpression.value":{type:[0]}})],v.prototype,"writeFeatureExpressionInfo",null),Object(s.a)([Object(n.b)({type:O.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:O.jsonValues,read:O.read,write:{writer:O.write,isRequired:!0}}})],v.prototype,"mode",null),Object(s.a)([Object(n.b)({type:Number,json:{write:!0}})],v.prototype,"offset",void 0),Object(s.a)([Object(n.b)({type:g,json:{type:String,read:m.read,write:m.write}})],v.prototype,"unit",null),v=f=Object(s.a)([Object(c.a)("esri.layers.support.ElevationInfo")],v);var j=v;t.a=j},198:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=198},210:function(e,t,r){"use strict";r.d(t,"a",(function(){return J})),r.d(t,"b",(function(){return V}));var i=r(3),s=(r(20),r(10)),a=r(5),n=r(57),o=r(7),l=r(49);const c=o.a.getLogger("esri.core.workers.Connection");var u=r(12),d=r(16),p=r(19),h=r(4),b=r(102);r(122),r(125),r(160),r(154),r(11);const y={};var g=function(e){var t;const r={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(r.async=!0),e.hasOwnProperty("isDebug")||(r.isDebug=!1),e.baseUrl||(r.baseUrl=y.baseUrl),null==(t=y.packages)||t.forEach(e=>{!function(e,t){for(const r of e)if(r.name===t.name)return;e.push(t)}(r.packages,e)}),r},f=r(1);class O{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(t=>{this[t]=(...r)=>e[t](...r)})}}const m=f.a.MutationObserver||f.a.WebKitMutationObserver,v=function(){let e;if(f.a.process&&f.a.process.nextTick)e=e=>{f.a.process.nextTick(e)};else if(f.a.Promise)e=e=>{f.a.Promise.resolve().then(e)};else if(m){const t=[],r=document.createElement("div");new m(()=>{for(;t.length>0;)t.shift()()}).observe(r,{attributes:!0}),e=e=>{t.push(e),r.setAttribute("queueStatus","1")}}return e}(),j=(()=>{const e=f.a.MessageEvent;try{new e("message",{data:null})}catch{return(e,t={})=>{const{data:r,bubbles:i=!1,cancelable:s=!1}=t,a=document.createEvent("Event");return a.initEvent(e,i,s),a.data=r,a}}return(t,r)=>new e(t,r)})();var w=class{constructor(){this._dispatcher=new O,this._isInitialized=!1,this._workerPostMessage({type:d.a.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){v(()=>{this._workerMessageHandler(j("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,r){this._dispatcher.addEventListener(e,t,r)}removeEventListener(e,t,r){this._dispatcher.removeEventListener(e,t,r)}_workerPostMessage(e){v(()=>{this.dispatchEvent(j("message",{data:e}))})}async _workerMessageHandler(e){const t=Object(d.d)(e);if(t)switch(t.type){case d.a.CONFIGURE:this._isInitialized||this._workerPostMessage({type:d.a.CONFIGURED});break;case d.a.OPEN:{const{modulePath:e,jobId:i}=t;let s=await n.default.loadWorker(e);s||(s=await r(198)(e));const a=n.default.connect(s);this._workerPostMessage({type:d.a.OPENED,jobId:i,data:a});break}}}};const S=o.a.getLogger("esri.core.workers");i.a.add("esri-workers-arraybuffer-transfer",!Object(i.a)("safari")||Object(i.a)("safari")>=12);const{CONFIGURED:_,CONFIGURE:I,HANDSHAKE:E}=d.a;let L;try{L=URL.createObjectURL(new Blob(['var esriConfig,remoteClientPath,globalId=0,outgoing=new Map,configured=!1,HANDSHAKE=0,CONFIGURE=1,CONFIGURED=2,OPEN=3,OPENED=4,RESPONSE=5,INVOKE=6,ABORT=7;function createAbortError(){var e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,t,r){var o=r&&r.signal,n=globalId++;return new Promise((function(r,i){if(o){if(o.aborted)return i(createAbortError());o.addEventListener("abort",(function(){outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=o,data:t})}))}function messageHandler(e){var t=receiveMessage(e);if(t){var r=t.jobId;switch(t.type){case CONFIGURE:var o=t.configure;if(configured)return;configured=!0,esriConfig=o.esriConfig,remoteClientPath=esriConfig.workers.remoteClientPath,self.dojoConfig=o.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(o.loaderConfig)),self.postMessage({type:CONFIGURED});break;case OPEN:var n,i=/^https?:\\/\\//i.test(t.modulePath)?t.modulePath:esriConfig.baseUrl+t.modulePath;function a(e){var t=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([remoteClientPath.replace(/\\.js$/,"")],(function(e){(n=e.default||e).loadWorker(t.modulePath).then((function(e){return e||new Promise((function(e){require([t.modulePath],e)}))})).then(a)})):"System"in self&&"function"==typeof System.import?System.import(esriConfig.baseUrl+remoteClientPath).then((function(e){return(n=e.default).loadWorker(t.modulePath)})).then((function(e){return e||System.import(i)})).then(a):(self.RemoteClient||importScripts(esriConfig.baseUrl+remoteClientPath),(n=self.RemoteClient.default||self.RemoteClient).loadWorker(t.modulePath).then(a));break;case RESPONSE:if(outgoing.has(r)){var s=outgoing.get(r);outgoing.delete(r),t.error?s.reject(JSON.parse(t.error)):s.resolve(t.data)}}}}self.addEventListener("message",messageHandler),self.postMessage({type:HANDSHAKE});'],{type:"text/javascript"}))}catch(e){}const x="Failed to create Worker. Fallback to execute module in main thread";async function k(e){return Object(a.f)(t=>{function r(a){const n=Object(d.d)(a);if(n)switch(n.type){case E:!function(e){let t;if(null!=p.a.default){const e={...p.a};delete e.default,t=JSON.parse(JSON.stringify(e))}else t=JSON.parse(JSON.stringify(p.a));t.baseUrl=Object(h.x)(t.baseUrl),t.locale=Object(b.b)(),t.has={"csp-restrictions":Object(i.a)("csp-restrictions"),"esri-2d-debug":Object(i.a)("esri-2d-debug"),"esri-2d-update-debug":Object(i.a)("esri-2d-update-debug"),"esri-atomics":Object(i.a)("esri-atomics"),"esri-secure-context":Object(i.a)("esri-secure-context"),"esri-shared-array-buffer":Object(i.a)("esri-shared-array-buffer"),"esri-tiles-debug":Object(i.a)("esri-tiles-debug"),"esri-webgl-max-texture-size":Object(i.a)("esri-webgl-max-texture-size"),"esri-webgl-texture-float":Object(i.a)("esri-webgl-texture-float"),"esri-workers-arraybuffer-transfer":Object(i.a)("esri-workers-arraybuffer-transfer"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Object(h.x)(t.workers.loaderUrl)),t.workers.remoteClientPath||(t.workers.remoteClientPath=p.a.assetsPath+"/esri/core/workers/RemoteClient.js");const r=p.a.workers.loaderConfig,s=g({baseUrl:null==r?void 0:r.baseUrl,locale:Object(b.b)(),has:{"csp-restrictions":Object(i.a)("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1,...null==r?void 0:r.has},map:{...null==r?void 0:r.map},paths:{...null==r?void 0:r.paths},packages:(null==r?void 0:r.packages)||[]});e.postMessage({type:I,configure:{esriConfig:t,loaderConfig:s}})}(e);break;case _:e.removeEventListener("message",r),e.removeEventListener("error",s),t(e)}}function s(t){t.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",s),S.warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new w).addEventListener("message",r),e.addEventListener("error",s)}e.addEventListener("message",r),e.addEventListener("error",s)})}const M=o.a.getLogger("esri.core.workers"),{ABORT:C,INVOKE:P,OPEN:A,OPENED:T,RESPONSE:N}=d.a;class U{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",e=>{e.preventDefault(),M.error(e)})}static async create(e){const t=await async function(){if(!Object(i.a)("esri-workers"))return k(new w);let e;if(L)try{e=new Worker(L)}catch(t){S.warn(x,event),e=new w}else S.warn(x,event),e=new w;return k(e)}();return new U(t,e)}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:r}=t,i=Object(d.b)();return Object(a.f)((t,s)=>{const n={resolve:t,reject:s,abortHandle:Object(a.k)(r,()=>{this._outJobs.delete(i),this._post({type:C,jobId:i})})};this._outJobs.set(i,n),this._post({type:A,jobId:i,modulePath:e})})}_onMessage(e){const t=Object(d.d)(e);if(t)switch(t.type){case T:this._onOpenedMessage(t);break;case N:this._onResponseMessage(t);break;case C:this._onAbortMessage(t);break;case P:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,r=e.jobId,i=t.get(r);i&&(i.controller&&i.controller.abort(),t.delete(r))}_onInvokeMessage(e){const{methodName:t,jobId:r,data:i,abortable:s}=e,n=s?Object(a.c)():null,o=this._inJobs,l=u.d[t];let c;try{if("function"!=typeof l)throw new TypeError(t+" is not a function");c=l.call(null,i,{signal:n?n.signal:null})}catch(e){return void this._post({type:N,jobId:r,error:Object(d.e)(e)})}Object(a.i)(c)?(o.set(r,{controller:n,promise:c}),c.then(e=>{o.has(r)&&(o.delete(r),this._post({type:N,jobId:r},e))},e=>{o.has(r)&&(o.delete(r),e||(e={message:"Error encountered at method"+t}),Object(a.b)(e)||this._post({type:N,jobId:r,error:Object(d.e)(e||{message:"Error encountered at method "+t})}))})):this._post({type:N,jobId:r},c)}_onOpenedMessage(e){var t;const{jobId:r,data:i}=e,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),null==(t=s.abortHandle)||t.remove(),s.resolve(i))}_onResponseMessage(e){var t;const{jobId:r,error:i,data:a}=e,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),null==(t=n.abortHandle)||t.remove(),i?n.reject(s.a.fromJSON(JSON.parse(i))):n.resolve(a))}_post(e,t,r){return Object(d.c)(this.worker,e,t,r)}}var D=U;let R=Object(i.a)("esri-workers-debug")?1:Object(i.a)("host-browser")?navigator.hardwareConcurrency-1:0;R||(R=Object(i.a)("safari")&&Object(i.a)("mac")||Object(i.a)("trident")?7:2);let G=0;const H=[];function V(e,t){return F(e,{client:t})}async function F(e,t){const r=new class{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){return Object(a.f)((r,i)=>{let s=!0;const o=e=>{Object(a.t)(t.signal),s&&(s=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length;for(let s=0;s<e.length;++s){const l=e[s];Object(a.p)(l)?this._clientPromises[s]=l.then(e=>(this._clients[s]=new n.default(e,t),o(r),this._clients[s]),()=>(o(i),null)):(this._clients[s]=new n.default(l,t),this._clientPromises[s]=Object(a.r)(this._clients[s]),o(r))}})}broadcast(e,t,r){const i=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const a=this._clientPromises[s];i[s]=a.then(i=>i.invoke(e,t,r))}return i}close(){for(const e of this._clientPromises)e.then(e=>e.close());this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let e;for(let t=0;t<this._clients.length;++t){const r=this._clients[t];if(r){if(!r.isBusy())return Object(a.r)(r)}else e=e||[],e.push(this._clientPromises[t])}return e?Object(a.q)(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Object(a.r)(this._clients[this._clientIdx]))}invoke(e,t,r){let i=null;return Array.isArray(r)?(c.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),i={transferList:r}):i=r,this.closed?Object(a.h)(new Error("Connection closed")):this.getAvailableClient().then(r=>r.invoke(e,t,i))}on(e,t){return Object(a.a)(this._clientPromises).then(()=>Object(l.a)(this._clients.map(r=>r.on(e,t))))}openPorts(){return Object(a.f)(e=>{const t=new Array(this._clientPromises.length);let r=t.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then(s=>{t[i]=s.openPort(),0==--r&&e(t)})})}get test(){return{numClients:this._clients.length}}};return await r.open(e,t),r}async function J(e,t={}){if("string"!=typeof e)throw new s.a("workers:undefined-module","modulePath is missing");let o=t.strategy||"distributed";if(Object(i.a)("host-webworker")&&!Object(i.a)("esri-workers")&&(o="local"),"local"===o){let i=await n.default.loadWorker(e);i||(i=await r(198)(e)),Object(a.t)(t.signal);const s=t.client||i;return F([n.default.connect(i)],{...t,client:s})}if(await $(),Object(a.t)(t.signal),"dedicated"===o){const r=G++%R;return F([await H[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,R);if(r<R){const i=new Array(r);for(let s=0;s<r;++s){const r=G++%R;i[r]=H[r].open(e,t)}return F(i,t)}}return F(H.map(r=>r.open(e,t)),t)}let B,W=null;async function $(){if(W)return W;B=Object(a.c)();const e=[];for(let t=0;t<R;t++){const r=D.create(t).then(e=>(H[t]=e,e));e.push(r)}return W=Object(a.a)(e),W}},225:function(e,t,r){"use strict";var i,s=r(24),a=(r(3),r(20),r(7),r(9),r(26)),n=r(67),o=r(68),l=r(47),c=r(25),u=r(66),d=(r(4),r(41),r(42),r(21)),p=r(65),h=r(110);const b=Object(n.b)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),y=b.jsonValues.slice();Object(d.h)(y,"orthometric");const g=Object(n.b)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let f=i=class extends p.a{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return b.write(e,t,r)}readHeightModel(e,t,r){return b.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new l.a("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return g.read(e)||(r&&r.messages&&r.messages.push(O(e,{context:r})),null)}readHeightUnitService(e,t,r){return Object(h.n)(e)||g.read(e)||(r&&r.messages&&r.messages.push(O(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new i({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=Object(h.e)(t);return new i({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new i;return t.read(e,{origin:"web-scene"}),t}};function O(e,t){return new l.a("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}Object(s.a)([Object(a.b)({type:b.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:y,default:"ellipsoidal"}}}})],f.prototype,"heightModel",void 0),Object(s.a)([Object(u.a)("web-scene","heightModel")],f.prototype,"writeHeightModel",null),Object(s.a)([Object(o.a)(["web-scene","service"],"heightModel")],f.prototype,"readHeightModel",null),Object(s.a)([Object(a.b)({type:g.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g.jsonValues,write:g.write}}}})],f.prototype,"heightUnit",void 0),Object(s.a)([Object(o.a)("web-scene","heightUnit")],f.prototype,"readHeightUnit",null),Object(s.a)([Object(o.a)("service","heightUnit")],f.prototype,"readHeightUnitService",null),Object(s.a)([Object(a.b)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],f.prototype,"vertCRS",void 0),Object(s.a)([Object(o.a)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],f.prototype,"readVertCRS",null),f=i=Object(s.a)([Object(c.a)("esri.geometry.HeightModelInfo")],f);var m=f;t.a=m},354:function(e,t,r){"use strict";var i=r(243);t.a=class{constructor(e,t){this._storage=new i.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,r){this._storage.put(e,t,r,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},370:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(24),s=(r(3),r(20),r(7),r(9),r(26)),a=r(68),n=r(25),o=(r(4),r(41),r(42),r(71)),l=(r(72),r(371)),c=r(292);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new c.a({layer:this}):null}};return Object(i.a)([Object(s.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(i.a)([Object(s.b)()],t.prototype,"minScale",void 0),Object(i.a)([Object(a.a)("service","minScale")],t.prototype,"readMinScale",null),Object(i.a)([Object(s.b)()],t.prototype,"maxScale",void 0),Object(i.a)([Object(a.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(i.a)([Object(s.b)({type:o.a})],t.prototype,"spatialReference",void 0),Object(i.a)([Object(s.b)({readOnly:!0,dependsOn:["version"]})],t.prototype,"supportsBlankTile",null),Object(i.a)([Object(s.b)(l.b)],t.prototype,"tileInfo",void 0),Object(i.a)([Object(s.b)()],t.prototype,"tilemapCache",void 0),Object(i.a)([Object(a.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(i.a)([Object(s.b)()],t.prototype,"version",void 0),t=Object(i.a)([Object(n.a)("esri.layers.mixins.ArcGISCachedService")],t),t}},447:function(e,t,r){"use strict";r.r(t);var i=r(24),s=(r(3),r(20),r(2)),a=r(7),n=(r(9),r(26)),o=r(54),l=r(68),c=r(25),u=r(10),d=r(4),p=(r(41),r(5)),h=r(43),b=(r(42),r(99)),y=r(101),g=r(225),f=r(135),O=r(85),m=r(118),v=r(111),j=r(370),w=r(210);const S=a.a.getLogger("esri.views.3d.support.WorkerHandle");class _ extends class{constructor(e,t,r,i={}){this._methodName=t,this._promise=Object(w.a)(e,{...i,scheduler:r}).then(e=>{void 0===this._thread?(this._thread=e,this._promise=null):e.close()}),this._promise.catch(t=>S.error(`Failed to initialize ${e} worker: ${t}`))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t=null){if(this._thread){const r=this.getTransferList(e);return this._thread.invoke(this._methodName,e,{transferList:r,signal:t})}return this._promise?this._promise.then(()=>(Object(p.t)(t),this.invoke(e,t))):Object(p.h)(null)}broadcast(e,t){return this._thread?Object(p.a)(this._thread.broadcast(t,e)).then(()=>{}):this._promise?this._promise.then(()=>this.broadcast(e,t)):Object(p.h)()}get promise(){return this._promise}}{constructor(e){super("LercWorker","_decode",e,{strategy:"dedicated"}),this.scheduler=e}decode(e,t,r){return e&&0!==e.byteLength?this.invoke({buffer:e,options:t},r):Object(p.r)(null)}getTransferList(e){return[e.buffer]}}const I=new Map;const E=a.a.getLogger("esri.layers.ElevationLayer");let L=class extends(Object(j.a)(Object(f.a)(Object(m.a)(Object(v.a)(Object(y.a)(b.a)))))){constructor(...e){super(...e),this.copyright=null,this.heightModelInfo=null,this.path=null,this.opacity=1,this.operationalLayerType="ArcGISTiledElevationServiceLayer",this.sourceJSON=null,this.type="elevation",this.url=null,this.version=null,this._lercDecoder=function(e){let t=I.get(e);return t||(t={instance:new _(e),ref:0},I.set(e,t)),++t.ref,t.instance}()}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}destroy(){(function(e){if(null==e)return;const t=e.scheduler,r=I.get(t);r&&--r.ref<=0&&(r.instance.destroy(),I.delete(t))})(this._lercDecoder),this._lercDecoder=null}set minScale(e){this.constructed&&E.warn(this.declaredClass+".minScale support has been removed (since 4.5)")}get minScale(){}set maxScale(e){this.constructed&&E.warn(this.declaredClass+".maxScale support has been removed (since 4.5)")}get maxScale(){}readVersion(e,t){let r=t.currentVersion;return r||(r=9.3),r}load(e){const t=Object(s.h)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:e=>{for(let t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new u.a("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).then(()=>this._fetchImageService(t),()=>this._fetchImageService(t))),Object(p.r)(this)}fetchTile(e,t,r,i={}){null!=i&&"number"==typeof i&&(Object(o.a)(E,"Passing 'noDataValue' directly as a parameter",{replacement:"use { noDataValue } options object instead",version:"4.12"}),i={noDataValue:i});const s={responseType:"array-buffer",signal:i.signal},a={noDataValue:i.noDataValue,returnFileInfo:!0};return this.load().then(()=>this._fetchTileAvailability(e,t,r,i)).then(()=>Object(h.default)(this.getTileUrl(e,t,r),s)).then(e=>this._lercDecoder.decode(e.data,a,i.signal)).then(e=>({values:e.pixelData,width:e.width,height:e.height,maxZError:e.fileInfo.maxZError,noDataValue:e.noDataValue,minValue:e.minValue,maxValue:e.maxValue}))}getTileUrl(e,t,r){const i=!this.tilemapCache&&this.supportsBlankTile,s=Object(d.B)({...this.parsedUrl.query,blankTile:!i&&null});return`${this.parsedUrl.path}/tile/${e}/${t}/${r}${s?"?"+s:""}`}queryElevation(e,t){return this._importElevationQuery().then(r=>(new r.ElevationQuery).query(this,e,t))}createElevationSampler(e,t){return this._importElevationQuery().then(r=>(new r.ElevationQuery).createSampler(this,e,t))}_fetchTileAvailability(e,t,r,i){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,r,i):Object(p.r)("unknown")}async _fetchImageService(e){if(this.sourceJSON)return this.sourceJSON;const t={query:{f:"json",...this.parsedUrl.query},responseType:"json",signal:e},r=await Object(h.default)(this.parsedUrl.path,t);r.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=r.data,this.read(r.data,{origin:"service",url:this.parsedUrl})}_importElevationQuery(){return r.e(201).then(r.bind(null,548))}};Object(i.a)([Object(n.b)({json:{read:{source:"copyrightText"}}})],L.prototype,"copyright",void 0),Object(i.a)([Object(n.b)({readOnly:!0,type:g.a})],L.prototype,"heightModelInfo",void 0),Object(i.a)([Object(n.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],L.prototype,"path",void 0),Object(i.a)([Object(n.b)({type:["show","hide"]})],L.prototype,"listMode",void 0),Object(i.a)([Object(n.b)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],L.prototype,"minScale",null),Object(i.a)([Object(n.b)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],L.prototype,"maxScale",null),Object(i.a)([Object(n.b)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],L.prototype,"opacity",void 0),Object(i.a)([Object(n.b)({type:["ArcGISTiledElevationServiceLayer"]})],L.prototype,"operationalLayerType",void 0),Object(i.a)([Object(n.b)()],L.prototype,"sourceJSON",void 0),Object(i.a)([Object(n.b)({json:{read:!1},value:"elevation",readOnly:!0})],L.prototype,"type",void 0),Object(i.a)([Object(n.b)(O.j)],L.prototype,"url",void 0),Object(i.a)([Object(n.b)()],L.prototype,"version",void 0),Object(i.a)([Object(l.a)("version",["currentVersion"])],L.prototype,"readVersion",null),L=Object(i.a)([Object(c.a)("esri.layers.ElevationLayer")],L);var x=L;t.default=x},85:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return g})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return y})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return p}));var i=r(6),s=r(87),a=r(95),n=r(175),o=r(81),l=r(146);const c={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader(e,t){if(null!=t.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return t.screenSizePerspective;Object(i.a)(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer(e,t,r,i){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||Object(a.a)(this,"screenSizePerspectiveEnabled",{},i))&&(t[r]=e)}}}}}},u={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},d={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},p={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:s.f}}},h={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},b={value:null,type:l.a,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function y(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const g={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0},"portal-item":{write:!0}}}},f={...g,json:{...g.json,origins:{"web-document":{...g.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?Object(n.b)(t.layerDefinition.drawingInfo.transparency):void 0:Object(n.b)(t.drawingInfo.transparency)}}},O={type:o.a,dependsOn:["view.timeExtent","layer.timeExtent","layer.timeInfo","layer.timeOffset","layer.timeOffset.value","layer.timeOffset.unit","layer.useViewTime"],readOnly:!0,get(){var e,t;if(!(null==(e=this.layer)?void 0:e.timeInfo))return null;const r=null==(t=this.view)?void 0:t.timeExtent,i=this.layer.timeExtent,s=this.layer.useViewTime?r&&i?r.intersection(i):r||i:i;if(!s||s.isEmpty)return s;const a=this.layer.timeOffset,n=a?s.offset(-a.value,a.unit):s,o=this._get("timeExtent");return n.equals(o)?o:n}}},99:function(e,t,r){"use strict";var i=r(24),s=(r(3),r(20),r(19)),a=r(7),n=(r(9),r(26)),o=r(25),l=r(10),c=r(4),u=(r(41),r(43)),d=(r(42),r(71)),p=r(70),h=(r(72),r(112)),b=r(170),y=r(98);let g=0;const f=a.a.getLogger("esri.layers.Layer");let O=class extends(h.a.EventedMixin(Object(b.a)(y.a))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new p.a(-180,-90,180,90,d.a.WGS84),this.id=Date.now().toString(16)+"-layer-"+g++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=d.a.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,i=await r.e(78).then(r.bind(null,209));try{return await i.fromUrl(t)}catch(e){throw f.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",e),e}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},i=await r.e(79).then(r.bind(null,190));try{return await i.fromItem(t)}catch(e){const r=t&&t.portalItem,i=r&&r.id||"unset",a=r&&r.portal&&r.portal.url||s.a.portalUrl;throw f.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+i+"')",e),e}}initialize(){this.when().catch(e=>{var t,r;a.a.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this._get("url");return e?Object(c.H)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Object(u.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new l.a("layer:no-attribution-data","Layer does not have attribution data")}};Object(i.a)([Object(n.b)({type:String})],O.prototype,"attributionDataUrl",void 0),Object(i.a)([Object(n.b)({type:p.a})],O.prototype,"fullExtent",void 0),Object(i.a)([Object(n.b)({readOnly:!0,dependsOn:["attributionDataUrl"]})],O.prototype,"hasAttributionData",null),Object(i.a)([Object(n.b)({type:String})],O.prototype,"id",void 0),Object(i.a)([Object(n.b)({type:Boolean,nonNullable:!0})],O.prototype,"legendEnabled",void 0),Object(i.a)([Object(n.b)({type:["show","hide","hide-children"]})],O.prototype,"listMode",void 0),Object(i.a)([Object(n.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],O.prototype,"opacity",void 0),Object(i.a)([Object(n.b)()],O.prototype,"parent",void 0),Object(i.a)([Object(n.b)({readOnly:!0,dependsOn:["url"]})],O.prototype,"parsedUrl",null),Object(i.a)([Object(n.b)({type:Boolean})],O.prototype,"popupEnabled",void 0),Object(i.a)([Object(n.b)({type:Boolean})],O.prototype,"attributionVisible",void 0),Object(i.a)([Object(n.b)({type:d.a})],O.prototype,"spatialReference",void 0),Object(i.a)([Object(n.b)({type:String})],O.prototype,"title",void 0),Object(i.a)([Object(n.b)({type:String,readOnly:!0,json:{read:!1}})],O.prototype,"type",void 0),Object(i.a)([Object(n.b)()],O.prototype,"url",void 0),Object(i.a)([Object(n.b)({type:Boolean,nonNullable:!0})],O.prototype,"visible",void 0),O=Object(i.a)([Object(o.a)("esri.layers.Layer")],O);var m=O;t.a=m}});