self.webpackChunkRemoteClient([17,44],{103:function(e,t,r){"use strict";r.d(t,"a",(function(){return L}));var i,o=r(24),a=(r(3),r(20),r(7),r(9)),s=r(26),n=r(75),l=r(67),c=r(69),u=r(68),p=r(38),d=r(25),b=(r(4),r(41),r(42),r(65)),y=r(107),h=r(133),j=r(71),O=r(134);r(72);let m=i=class extends b.a{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:r,oidFields:o,spatialReference:a,geometryType:s}=this,n={workspaceId:t,query:r,oidFields:o,spatialReference:null!=(e=null==a?void 0:a.clone())?e:void 0,geometryType:s};return new i(n)}};var f;Object(o.a)([Object(c.a)({queryTable:"query-table"})],m.prototype,"type",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],m.prototype,"workspaceId",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],m.prototype,"query",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],m.prototype,"oidFields",void 0),Object(o.a)([Object(s.b)({type:j.a,json:{write:!0}})],m.prototype,"spatialReference",void 0),Object(o.a)([Object(c.a)(O.a)],m.prototype,"geometryType",void 0),m=i=Object(o.a)([Object(d.a)("esri.layers.support.source.QueryTableDataSource")],m);let v=f=class extends b.a{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new f({workspaceId:e,dataSourceName:t})}};var g;Object(o.a)([Object(c.a)({raster:"raster"})],v.prototype,"type",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],v.prototype,"dataSourceName",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],v.prototype,"workspaceId",void 0),v=f=Object(o.a)([Object(d.a)("esri.layers.support.source.RasterDataSource")],v);let w=g=class extends b.a{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new g({workspaceId:e,gdbVersion:t,dataSourceName:r})}};var S;Object(o.a)([Object(c.a)({table:"table"})],w.prototype,"type",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],w.prototype,"workspaceId",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],w.prototype,"gdbVersion",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],w.prototype,"dataSourceName",void 0),w=g=Object(o.a)([Object(d.a)("esri.layers.support.source.TableDataSource")],w);const x=Object(l.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let T=S=class extends b.a{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return F()(e,t,r)}castLeftTableSource(e){return Object(a.k)(P(),e)}readRightTableSource(e,t,r){return F()(e,t,r)}castRightTableSource(e){return Object(a.k)(P(),e)}clone(){var e,t;const{leftTableKey:r,rightTableKey:i,leftTableSource:o,rightTableSource:a,joinType:s}=this,n={leftTableKey:r,rightTableKey:i,leftTableSource:null!=(e=null==o?void 0:o.clone())?e:void 0,rightTableSource:null!=(t=null==a?void 0:a.clone())?t:void 0,joinType:s};return new S(n)}};Object(o.a)([Object(c.a)({joinTable:"join-table"})],T.prototype,"type",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],T.prototype,"leftTableKey",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],T.prototype,"rightTableKey",void 0),Object(o.a)([Object(s.b)({json:{write:!0}})],T.prototype,"leftTableSource",void 0),Object(o.a)([Object(u.a)("leftTableSource")],T.prototype,"readLeftTableSource",null),Object(o.a)([Object(n.a)("leftTableSource")],T.prototype,"castLeftTableSource",null),Object(o.a)([Object(s.b)({json:{write:!0}})],T.prototype,"rightTableSource",void 0),Object(o.a)([Object(u.a)("rightTableSource")],T.prototype,"readRightTableSource",null),Object(o.a)([Object(n.a)("rightTableSource")],T.prototype,"castRightTableSource",null),Object(o.a)([Object(c.a)(x)],T.prototype,"joinType",void 0),T=S=Object(o.a)([Object(d.a)("esri.layers.support.source.JoinTableDataSource")],T);let I=null;function F(){return I||(I=Object(p.b)({types:P()})),I}let _=null;function P(){return _||(_={key:"type",base:null,typeMap:{"data-layer":L,"map-layer":h.a}}),_}var R;const E={key:"type",base:null,typeMap:{"join-table":T,"query-table":m,raster:v,table:w}};let L=R=class extends b.a{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new R({fields:e,dataSource:t})}};Object(o.a)([Object(c.a)({dataLayer:"data-layer"})],L.prototype,"type",void 0),Object(o.a)([Object(s.b)({type:[y.a],json:{write:!0}})],L.prototype,"fields",void 0),Object(o.a)([Object(s.b)({types:E,json:{write:!0}})],L.prototype,"dataSource",void 0),L=R=Object(o.a)([Object(d.a)("esri.layers.support.source.DataLayerSource")],L),L.from=Object(a.m)(L)},104:function(e,t,r){"use strict";function i(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function o(e){return e.toLowerCase().trim()}t.a=class{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!e)return;const t=[];for(const r of e){const e=r&&r.name;if(e){const a=o(e);this._fieldsMap.set(e,r),this._fieldsMap.set(a,r),t.push(a),i(r)&&(this.dateFields.push(r),this._dateFieldsSet.add(r))}}t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(o(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}},108:function(e,t,r){"use strict";var i,o=r(24),a=(r(3),r(20),r(8)),s=(r(7),r(9)),n=r(26),l=r(75),c=r(67),u=r(25),p=r(66),d=(r(4),r(41),r(42),r(65)),b=r(71),y=r(73),h=r(72),j=r(86),O=r(81),m=r(103),f=r(132),v=r(126);const g=new c.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),w=new c.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let S=i=class extends d.a{constructor(e){super(e),this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.units=null,this.where=null}static from(e){return Object(s.d)(i,e)}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const t in e){const i=e[t];Array.isArray(i)?r[t]=i.map(e=>e instanceof Date?e.getTime():e):i instanceof Date?r[t]=i.getTime():r[t]=i}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new i(Object(a.a)({cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))}};S.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(o.a)([Object(n.b)({type:Boolean,json:{write:{writer:(e,t)=>{null!=e&&(t.cacheHint=e)}}}})],S.prototype,"cacheHint",void 0),Object(o.a)([Object(n.b)({json:{write:!0}})],S.prototype,"datumTransformation",void 0),Object(o.a)([Object(l.a)("datumTransformation")],S.prototype,"castDatumTransformation",null),Object(o.a)([Object(n.b)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],S.prototype,"distance",void 0),Object(o.a)([Object(n.b)({type:m.a,json:{write:!0}})],S.prototype,"dynamicDataSource",void 0),Object(o.a)([Object(n.b)({type:String,json:{write:!0}})],S.prototype,"gdbVersion",void 0),Object(o.a)([Object(n.b)({types:h.a,json:{read:y.a,write:!0}})],S.prototype,"geometry",void 0),Object(o.a)([Object(n.b)({type:Number,json:{write:!0}})],S.prototype,"geometryPrecision",void 0),Object(o.a)([Object(n.b)({type:[String],json:{write:!0}})],S.prototype,"groupByFieldsForStatistics",void 0),Object(o.a)([Object(n.b)({type:String,json:{write:!0}})],S.prototype,"having",void 0),Object(o.a)([Object(n.b)({type:Date})],S.prototype,"historicMoment",void 0),Object(o.a)([Object(p.a)("historicMoment")],S.prototype,"writeHistoricMoment",null),Object(o.a)([Object(n.b)({type:Number,json:{write:!0}})],S.prototype,"maxAllowableOffset",void 0),Object(o.a)([Object(n.b)({type:Number,cast:e=>e<1?1:e>i.MAX_MAX_RECORD_COUNT_FACTOR?i.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],S.prototype,"maxRecordCountFactor",void 0),Object(o.a)([Object(n.b)({type:String,json:{write:!0}})],S.prototype,"multipatchOption",void 0),Object(o.a)([Object(n.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],S.prototype,"num",void 0),Object(o.a)([Object(n.b)({type:[Number],json:{write:!0}})],S.prototype,"objectIds",void 0),Object(o.a)([Object(n.b)({type:[String],json:{write:!0}})],S.prototype,"orderByFields",void 0),Object(o.a)([Object(n.b)({type:[String],json:{write:!0}})],S.prototype,"outFields",void 0),Object(o.a)([Object(n.b)({type:b.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],S.prototype,"outSpatialReference",void 0),Object(o.a)([Object(n.b)({type:[v.a],json:{write:{enabled:!0,overridePolicy(){var e;return{enabled:(null==(e=this.outStatistics)?void 0:e.length)>0}}}}})],S.prototype,"outStatistics",void 0),Object(o.a)([Object(n.b)({json:{write:!0}})],S.prototype,"parameterValues",void 0),Object(o.a)([Object(p.a)("parameterValues")],S.prototype,"writeParameterValues",null),Object(o.a)([Object(n.b)({types:j.i,json:{write:!0}})],S.prototype,"pixelSize",void 0),Object(o.a)([Object(n.b)({type:f.a,json:{write:!0}})],S.prototype,"quantizationParameters",void 0),Object(o.a)([Object(n.b)({type:[Object],json:{write:!0}})],S.prototype,"rangeValues",void 0),Object(o.a)([Object(n.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],S.prototype,"relationParameter",void 0),Object(o.a)([Object(n.b)({type:String,json:{write:!0}})],S.prototype,"resultType",void 0),Object(o.a)([Object(n.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],S.prototype,"returnCentroid",void 0),Object(o.a)([Object(n.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],S.prototype,"returnDistinctValues",void 0),Object(o.a)([Object(n.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:!e})}}})],S.prototype,"returnExceededLimitFeatures",void 0),Object(o.a)([Object(n.b)({type:Boolean,json:{write:!0}})],S.prototype,"returnGeometry",void 0),Object(o.a)([Object(n.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],S.prototype,"returnQueryGeometry",void 0),Object(o.a)([Object(n.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],S.prototype,"returnM",void 0),Object(o.a)([Object(n.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],S.prototype,"returnZ",void 0),Object(o.a)([Object(n.b)({type:String,json:{read:{source:"spatialRel",reader:g.read},write:{target:"spatialRel",writer:g.write}}})],S.prototype,"spatialRelationship",void 0),Object(o.a)([Object(n.b)({type:Number,json:{read:{source:"resultOffset"}}})],S.prototype,"start",void 0),Object(o.a)([Object(p.a)("start"),Object(p.a)("num")],S.prototype,"writeStart",null),Object(o.a)([Object(n.b)({type:String,json:{write:!0}})],S.prototype,"sqlFormat",void 0),Object(o.a)([Object(n.b)({type:String,json:{write:!0}})],S.prototype,"text",void 0),Object(o.a)([Object(n.b)({type:O.a,json:{write:!0}})],S.prototype,"timeExtent",void 0),Object(o.a)([Object(n.b)({type:String,json:{read:w.read,write:{writer:w.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],S.prototype,"units",void 0),Object(o.a)([Object(n.b)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||this.start>0}}}}})],S.prototype,"where",void 0),Object(o.a)([Object(p.a)("where")],S.prototype,"writeWhere",null),S=i=Object(o.a)([Object(u.a)("esri.tasks.support.Query")],S);var x=S;t.a=x},120:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return O})),r.d(t,"f",(function(){return l}));var i=r(44);const o=new RegExp("__begin__","ig"),a=new RegExp("__end__","ig"),s=new RegExp("^__begin__","i"),n=new RegExp("__end__$","i");function l(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function c(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function u(e){const t=c(e);if(!t)return null;switch(t.type){case"conventional":return d(t.expression);case"arcade":return t.expression}return null}function p(e){const t=c(e);if(!t)return null;switch(t.type){case"conventional":return function(e){const t=e.match(b);return t&&t[1].trim()||null}(t.expression);case"arcade":return O(t.expression)}return null}function d(e){let t;return e?(t=Object(i.c)(e,e=>'__begin__$feature["'+e+'"]__end__'),t=s.test(t)?t.replace(s,""):'"'+t,t=n.test(t)?t.replace(n,""):t+'"',t=t.replace(o,'" + ').replace(a,' + "')):t='""',t}const b=/^\s*\{([^}]+)\}\s*$/i;const y=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,h=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,j=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function O(e){if(!e)return null;let t=y.exec(e)||h.exec(e);return t?t[1]||t[3]:(t=j.exec(e),t?t[2]:null)}},126:function(e,t,r){"use strict";var i,o=r(24),a=(r(3),r(20),r(8)),s=(r(7),r(9),r(26)),n=r(67),l=r(25),c=r(66),u=(r(4),r(41),r(42),r(65));const p=new n.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let d=i=class extends u.a{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(a.a)(e))}clone(){return new i({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(a.a)(this.statisticParameters)})}};Object(o.a)([Object(s.b)({type:Number,json:{write:!0}})],d.prototype,"maxPointCount",void 0),Object(o.a)([Object(s.b)({type:Number,json:{write:!0}})],d.prototype,"maxRecordCount",void 0),Object(o.a)([Object(s.b)({type:Number,json:{write:!0}})],d.prototype,"maxVertexCount",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],d.prototype,"onStatisticField",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],d.prototype,"outStatisticFieldName",void 0),Object(o.a)([Object(s.b)({type:String,json:{read:{source:"statisticType",reader:p.read},write:{target:"statisticType",writer:p.write}}})],d.prototype,"statisticType",void 0),Object(o.a)([Object(s.b)({type:Object})],d.prototype,"statisticParameters",void 0),Object(o.a)([Object(c.a)("statisticParameters")],d.prototype,"writeStatisticParameters",null),d=i=Object(o.a)([Object(l.a)("esri.tasks.support.StatisticDefinition")],d);var b=d;t.a=b},132:function(e,t,r){"use strict";var i,o=r(24),a=(r(3),r(20),r(8)),s=(r(7),r(9),r(26)),n=r(67),l=r(25),c=(r(4),r(41),r(42),r(65)),u=r(70);r(72);const p=new n.a({upperLeft:"upper-left",lowerLeft:"lower-left"});let d=i=class extends c.a{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new i(Object(a.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};Object(o.a)([Object(s.b)({type:u.a,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],d.prototype,"extent",void 0),Object(o.a)([Object(s.b)({type:["view","edit"],json:{write:!0}})],d.prototype,"mode",void 0),Object(o.a)([Object(s.b)({type:String,json:{read:p.read,write:p.write}})],d.prototype,"originPosition",void 0),Object(o.a)([Object(s.b)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],d.prototype,"tolerance",void 0),d=i=Object(o.a)([Object(l.a)("esri.tasks.support.QuantizationParameters")],d);var b=d;t.a=b},133:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i,o=r(24),a=(r(3),r(20),r(7),r(9)),s=r(26),n=r(69),l=r(25),c=(r(4),r(41),r(42),r(65));let u=i=class extends c.a{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new i({mapLayerId:e,gdbVersion:t})}};Object(o.a)([Object(n.a)({mapLayer:"map-layer"})],u.prototype,"type",void 0),Object(o.a)([Object(s.b)({type:a.a,json:{write:!0}})],u.prototype,"mapLayerId",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],u.prototype,"gdbVersion",void 0),u=i=Object(o.a)([Object(l.a)("esri.layers.support.source.MapLayerSource")],u)},135:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r(24),o=(r(3),r(20),r(7)),a=(r(9),r(26)),s=r(25),n=(r(4),r(41),r(42),r(92));const l=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=Object(n.e)(this.url);if(e&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",Object(n.f)(e,o.a.getLogger(this.declaredClass)))}};return Object(i.a)([Object(a.b)({dependsOn:["url"]})],t.prototype,"title",null),Object(i.a)([Object(a.b)({type:String})],t.prototype,"url",null),t=Object(i.a)([Object(s.a)("esri.layers.mixins.ArcGISService")],t),t}},148:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return c}));const i=[252,146,31,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},s={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},n={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},162:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return u}));r(37),r(2);var i=r(152),o=r(188),a=r(197),s=r(207),n=r(148);a.a.fromJSON(n.a),i.a.fromJSON(n.c),o.a.fromJSON(n.b);const l=s.a.fromJSON(n.d);const c=a.a.fromJSON(n.e),u=i.a.fromJSON(n.g),p=o.a.fromJSON(n.f)},168:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(82),o=(r(116),r(157)),a=(r(166),r(185)),s=r(167),n=r(158),l=(r(159),r(150),r(131));const c=["oid","global-id"],u=["oid","global-id","guid"];function p({displayField:e,editFieldsInfo:t,fields:r,objectIdField:a,title:s},c){if(!r)return null;const u=O({editFieldsInfo:t,fields:r,objectIdField:a},c);if(!u.length)return null;const p=function(e){const t=Object(i.h)(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r}({titleBase:s,fields:r,displayField:e}),d=[new n.a,new o.a];return new l.a({title:p,content:d,fieldInfos:u})}const d=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],b=(e,{editFieldsInfo:t,objectIdField:r,visibleFieldNames:i})=>i?i.has(e.name):!(h(e.name,t)||r&&e.name===r||c.indexOf(e.type)>-1||d.some(t=>t.test(e.name)));function y(e,t){return"oid"===e.type?-1:"oid"===t.type?1:f(e)?-1:f(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function h(e,t){if(!e||!t)return!1;const{creationDateField:r,creatorField:i,editDateField:o,editorField:a}=t;return-1!==[r&&r.toLowerCase(),i&&i.toLowerCase(),o&&o.toLowerCase(),a&&a.toLowerCase()].indexOf(e.toLowerCase())}function j(e,t){return e.editable&&-1===u.indexOf(e.type)&&!h(e.name,t)}function O({editFieldsInfo:e,fields:t,objectIdField:r},i){return function(e,t){const r=e;return t&&(e=e.filter(e=>-1===t.indexOf(e.type))),e===r&&(e=e.slice()),e.sort(y),e}(t,(null==i?void 0:i.ignoreFieldTypes)||v).map(t=>new s.a({fieldName:t.name,isEditable:j(t,e),label:t.alias,format:m(t),visible:b(t,{editFieldsInfo:e,objectIdField:r,visibleFieldNames:null==i?void 0:i.visibleFieldNames})}))}function m(e){switch(e.type){case"small-integer":case"integer":case"single":return new a.a({digitSeparator:!0,places:0});case"double":return new a.a({digitSeparator:!0,places:2});case"date":return new a.a({dateFormat:"long-month-day-year"});default:return null}}function f(e){return"name"===(e.name&&e.name.toLowerCase())||("name"===(e.alias&&e.alias.toLowerCase())||void 0)}const v=["geometry","blob","raster","guid","xml"]},171:function(e,t,r){"use strict";var i=r(24),o=(r(3),r(20),r(8)),a=(r(7),r(9),r(26)),s=r(67),n=r(25),l=r(66),c=(r(4),r(41),r(42),r(65));const u=new s.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let p=class extends c.a{constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}writeDrawingTool(e,t){t.drawingTool=u.toJSON(e)}writePrototype(e,t){t.prototype=Object(o.c)(Object(o.a)(e),!0)}writeThumbnail(e,t){t.thumbnail=Object(o.c)(Object(o.a)(e))}};Object(i.a)([Object(a.b)({json:{write:!0}})],p.prototype,"name",void 0),Object(i.a)([Object(a.b)({json:{write:!0}})],p.prototype,"description",void 0),Object(i.a)([Object(a.b)({json:{read:u.read,write:u.write}})],p.prototype,"drawingTool",void 0),Object(i.a)([Object(l.a)("drawingTool")],p.prototype,"writeDrawingTool",null),Object(i.a)([Object(a.b)({json:{write:!0}})],p.prototype,"prototype",void 0),Object(i.a)([Object(l.a)("prototype")],p.prototype,"writePrototype",null),Object(i.a)([Object(a.b)({json:{write:!0}})],p.prototype,"thumbnail",void 0),Object(i.a)([Object(l.a)("thumbnail")],p.prototype,"writeThumbnail",null),p=Object(i.a)([Object(n.a)("esri.layers.support.FeatureTemplate")],p);var d=p;t.a=d},179:function(e,t,r){"use strict";var i,o=r(24),a=(r(3),r(20),r(8)),s=(r(7),r(9),r(26)),n=r(67),l=r(68),c=r(25),u=r(66),p=(r(4),r(41),r(42),r(65)),d=r(86),b=r(120);let y=i=class extends p.a{constructor(){super(...arguments),this.value=null,this.expression=null}readExpression(e,t){return t.value?Object(b.a)(t.value):e}writeExpression(e,t,r){null!=this.value&&(e=Object(b.a)(this.value)),t[r]=e}clone(){return new i({value:this.value,expression:this.expression})}};Object(o.a)([Object(s.b)({json:{read:!1,write:!1}})],y.prototype,"value",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:{allowNull:!0}}})],y.prototype,"expression",void 0),Object(o.a)([Object(l.a)("expression",["expression","value"])],y.prototype,"readExpression",null),Object(o.a)([Object(u.a)("expression")],y.prototype,"writeExpression",null),y=i=Object(o.a)([Object(c.a)("esri.layers.support.LabelExpressionInfo")],y);var h,j=y,O=r(162);const m=new n.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function f(e){return!e||"service"!==e.origin&&!(e.layer&&"map-image"===e.layer.type)}let v=h=class extends p.a{constructor(e){super(e),this.type="label",this.name=null,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.maxScale=0,this.minScale=0,this.symbol=O.a,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;const i=e.split(" ");if(3===i.length)return r(t[i[0]],i[1],i[2]);if(7===i.length){const e=r(t[i[0]],i[1],i[2]),o=i[3],a=r(t[i[4]],i[5],i[6]);switch(o){case"AND":return e&&a;case"OR":return e||a}}return!1}catch(t){console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r,i){if(this.labelExpressionInfo&&(f(i)||i&&"service"===i.origin))if(null!=this.labelExpressionInfo.value)e=Object(b.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const t=Object(b.e)(this.labelExpressionInfo.expression);t&&(e="["+t+"]")}null!=e&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(null==e&&null!=this.labelExpression&&f(i))e=new j({expression:this.getLabelExpressionArcade()});else if(!e)return;const o=e.toJSON(i);o.expression&&(t[r]=o)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return Object(b.b)(this)}getLabelExpressionArcade(){return Object(b.c)(this)}getLabelExpressionSingleField(){return Object(b.d)(this)}hash(){return JSON.stringify(this)}clone(){return new h({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(a.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(a.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],v.prototype,"name",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],v.prototype,"deconflictionStrategy",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:{allowNull:!0}}})],v.prototype,"labelExpression",void 0),Object(o.a)([Object(l.a)("labelExpression")],v.prototype,"readLabelExpression",null),Object(o.a)([Object(u.a)("labelExpression")],v.prototype,"writeLabelExpression",null),Object(o.a)([Object(s.b)({type:j,json:{write:{overridePolicy:(e,t,r)=>f(r)?{allowNull:!0}:{enabled:!1}}}})],v.prototype,"labelExpressionInfo",void 0),Object(o.a)([Object(u.a)("labelExpressionInfo")],v.prototype,"writeLabelExpressionInfo",null),Object(o.a)([Object(s.b)({type:m.apiValues,json:{type:m.jsonValues,read:m.read,write:m.write}})],v.prototype,"labelPlacement",void 0),Object(o.a)([Object(s.b)({type:Number})],v.prototype,"maxScale",void 0),Object(o.a)([Object(u.a)("maxScale")],v.prototype,"writeMaxScale",null),Object(o.a)([Object(s.b)({type:Number})],v.prototype,"minScale",void 0),Object(o.a)([Object(u.a)("minScale")],v.prototype,"writeMinScale",null),Object(o.a)([Object(s.b)({types:d.d,json:{origins:{"web-scene":{types:d.g,write:d.j,default:null}},write:d.j,default:null}})],v.prototype,"symbol",void 0),Object(o.a)([Object(s.b)({type:Boolean,json:{write:!0}})],v.prototype,"useCodedValues",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],v.prototype,"where",void 0),v=h=Object(o.a)([Object(c.a)("esri.layers.support.LabelClass")],v);var g=v;t.a=g},214:function(e,t,r){"use strict";var i=r(24),o=(r(3),r(20),r(8)),a=(r(7),r(9),r(26)),s=r(68),n=r(25),l=r(66),c=(r(4),r(41),r(42),r(65)),u=r(128),p=r(123),d=r(124),b=(r(149),r(171));let y=class extends c.a{constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(i.type){case"range":t[r]=d.a.fromJSON(i);break;case"codedValue":t[r]=u.a.fromJSON(i);break;case"inherited":t[r]=p.a.fromJSON(i)}}return t}writeDomains(e,t){const r={};for(const t in e)e.hasOwnProperty(t)&&(r[t]=e[t]&&e[t].toJSON());Object(o.c)(r),t.domains=r}readTemplates(e){return e&&e.map(e=>new b.a(e))}writeTemplates(e,t){t.templates=e&&e.map(e=>e.toJSON())}};Object(i.a)([Object(a.b)({json:{write:!0}})],y.prototype,"id",void 0),Object(i.a)([Object(a.b)({json:{write:!0}})],y.prototype,"name",void 0),Object(i.a)([Object(a.b)({json:{write:!0}})],y.prototype,"domains",void 0),Object(i.a)([Object(s.a)("domains")],y.prototype,"readDomains",null),Object(i.a)([Object(l.a)("domains")],y.prototype,"writeDomains",null),Object(i.a)([Object(a.b)({json:{write:!0}})],y.prototype,"templates",void 0),Object(i.a)([Object(s.a)("templates")],y.prototype,"readTemplates",null),Object(i.a)([Object(l.a)("templates")],y.prototype,"writeTemplates",null),y=Object(i.a)([Object(n.a)("esri.layers.support.FeatureType")],y);var h=y;t.a=h},315:function(e,t,r){"use strict";function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,"a",(function(){return i}))},325:function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var i=r(24),o=r(3),a=(r(20),r(7)),s=(r(9),r(26)),n=r(68),l=r(25),c=r(66),u=r(10),p=r(4),d=r(41),b=r(5),y=r(43),h=r(42),j=r(71),O=r(70),m=r(91),f=r(117),v=r(315);function g(e){e&&e.writtenProperties&&e.writtenProperties.forEach(e=>{const t=e.target;e.newOrigin&&e.oldOrigin!==e.newOrigin&&Object(v.a)(t)&&t.updateOrigin(e.propName,e.newOrigin)})}var w=r(92),S=r(225),x=r(96),T=r(177);async function I(e,t,r){if(!t||!t.resources)return;const i=t.portalItem===e.portalItem?Object(x.a)(e.paths):new Set;e.paths.length=0,e.portalItem=t.portalItem;const o=Object(x.a)(t.resources.toKeep.map(e=>e.resource.path)),a=new Set,s=[];o.forEach(t=>{i.delete(t),e.paths.push(t)});for(const n of t.resources.toUpdate)if(i.delete(n.resource.path),o.has(n.resource.path)||a.has(n.resource.path)){const{resource:t,content:i,finish:o,error:a}=n,l=Object(h.getSiblingOfSameTypeI)(t,Object(d.a)());e.paths.push(l.path),s.push(F({resource:l,content:i,finish:o,error:a},r))}else e.paths.push(n.resource.path),s.push(_(n,r)),a.add(n.resource.path);for(const i of t.resources.toAdd)s.push(F(i,r)),e.paths.push(i.resource.path);if(i.forEach(e=>{const r=t.portalItem.resourceFromPath(e);s.push(r.portalItem.removeResource(r).catch(()=>{}))}),0===s.length)return;const n=await Object(b.m)(s);Object(b.t)(r);const l=n.filter(e=>"error"in e).map(e=>e.error);if(l.length>0)throw new u.a("save:resources","Failed to save one or more resources",{errors:l})}async function F(e,t){const r=await Object(T.c)(e.resource.portalItem.addResource(e.resource,e.content,t));if(!0!==r.ok)throw e.error&&e.error(r.error),r.error;e.finish&&e.finish(e.resource)}async function _(e,t){const r=await Object(T.c)(e.resource.update(e.content,t));if(!0!==r.ok)throw e.error(r.error),r.error;e.finish(e.resource)}var P=r(85);const R=a.a.getLogger("esri.layers.mixins.SceneService"),E=e=>{let t=class extends e{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.copyright=null,this.sublayerTitleMode="item-title",this.title=null,this.layerId=null,this._debouncedSaveOperations=Object(b.n)(async(e,t,r)=>{switch(e){case 0:return this._save(t);case 1:return this._saveAs(r,t)}})}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return j.a.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,i=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=i?new j.a(i):null}}readFullExtent(e,t){const r=t.store,i=this._readSpatialReference(t);return null==i||null==r||null==r.extent||!Array.isArray(r.extent)||r.extent.some(e=>e<L)?null:new O.a({xmin:r.extent[0],ymin:r.extent[1],xmax:r.extent[2],ymax:r.extent[3],spatialReference:i})}readVersion(e,t){const r=t.store,i=null!=r.version?r.version.toString():"",o={major:Number.NaN,minor:Number.NaN,versionString:i},a=i.split(".");return a.length>=2&&(o.major=parseInt(a[0],10),o.minor=parseInt(a[1],10)),o}readTitlePortalItem(e){return"item-title"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return Object(w.h)(this.url,t.name);let i=t.name||Object(w.e)(this.url).title;return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(i=r+" - "+i),Object(w.a)(i)}set url(e){const t=Object(w.g)(this,e,R);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,r,i){Object(w.i)(this,e,"layers",t,i)}get parsedUrl(){const e=this._get("url");if(!e)return null;const t=Object(p.H)(e);return null!=this.layerId&&Object(w.b)(t.path)&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _verifyRootNodeAndUpdateExtent(e,t){if(e)try{return this._updateExtentFromRootPage(e,await this._fetchRootPage(e,t))}catch(e){}return this._updateExtentFromRootNode(await this._fetchRootNode(t))}async _fetchRootPage(e,t){if(!e)return Object(b.h)();const r=Math.floor(e.rootIndex/e.nodesPerPage),i=`${this.parsedUrl.path}/nodepages/${r}`;return(await Object(y.default)(i,{responseType:"json",signal:t})).data}_updateExtentFromRootPage(e,t){if(null==t||null==t.nodes)throw new u.a("sceneservice:invalid-node-page","Inavlid node page.");const r=t.nodes[e.rootIndex%e.nodesPerPage];if(null==r||null==r.obb||null==r.obb.center||null==r.obb.halfSize)throw new u.a("sceneservice:invalid-node-page","Inavlid node page.");if(r.obb.center[0]<L)return;const i=r.obb.halfSize,o=r.obb.center[2],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);this.fullExtent.zmin=o-a,this.fullExtent.zmax=o+a}_updateExtentFromRootNode(e){if(null==e||null==this.fullExtent||this.fullExtent.hasZ)return;if(!Array.isArray(e.mbs)||4!==e.mbs.length||e.mbs[0]<L)return;const t=e.mbs[2],r=e.mbs[3];this.fullExtent.zmin=t-r,this.fullExtent.zmax=t+r}async _fetchRootNode(e){if(!this.rootNode)return;const t=Object(p.w)(this.parsedUrl.path,this.rootNode);try{return(await Object(y.default)(t,{query:{f:"json"},responseType:"json",signal:e})).data}catch(e){throw new u.a("sceneservice:root-node-missing","Root node missing.",{error:e,url:t})}}async _fetchService(e){if(null==this.layerId&&/SceneServer\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const t=await Object(y.default)(this.url,{query:{f:"json"},responseType:"json",signal:e});if(t.data&&Array.isArray(t.data.layers)&&t.data.layers.length>0)return t.data.layers[0].id}async _fetchServiceLayer(e){const t=await Object(y.default)(this.parsedUrl.path,{query:{f:"json"},responseType:"json",signal:e});t.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));const r=t.data;this.read(r,{origin:"service",url:this.parsedUrl}),this.validateLayer(r)}async _ensureLoadBeforeSave(){await this.load(),"beforeSave"in this&&"function"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const i=t.getTypeKeywords();for(const t of i)e.typeKeywords.push(t);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((e,t,r)=>r.indexOf(e)===t),1===r&&(e.typeKeywords=e.typeKeywords.filter(e=>"Hosted Service"!==e)))}async _saveAs(e,t){const r={...A,...t};let i=f.default.from(e);i||(R.error("_saveAs(): requires a portal item parameter"),await Object(b.h)(new u.a("sceneservice:portal-item-required","_saveAs() requires a portal item to save to"))),i.id&&(i=i.clone(),i.id=null);const o=i.portal||m.a.getDefault();await this._ensureLoadBeforeSave(),i.type=C,i.portal=o;const a={origin:"portal-item",url:null,messages:[],portal:o,portalItem:i,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},s={layers:[this.write(null,a)]};return await Object(b.a)(a.resources.pendingOperations),await this._validateAgainstJSONSchema(s,a,r),i.url=this.url,i.title||(i.title=this.title),this._updateTypeKeywords(i,r,1),await o._signIn(),await o.user.addItem({item:i,folder:r&&r.folder,data:s}),await I(this.resourceReferences,a,null),this.portalItem=i,g(a),a.portalItem=i,i}async _save(e){const t={...A,...e};this.portalItem||(R.error("_save(): requires the .portalItem property to be set"),await Object(b.h)(new u.a("sceneservice:portal-item-not-set","Portal item to save to has not been set on this SceneService"))),this.portalItem.type!==C&&(R.error("_save(): Non-matching portal item type. Got "+this.portalItem.type+", expected "+C),await Object(b.h)(new u.a("sceneservice:portal-item-wrong-type",`Portal item needs to have type "${C}"`))),await this._ensureLoadBeforeSave();const r={origin:"portal-item",url:this.portalItem.itemUrl&&Object(p.H)(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||m.a.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},i={layers:[this.write(null,r)]};return await Object(b.a)(r.resources.pendingOperations),await this._validateAgainstJSONSchema(i,r,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,0),await this.portalItem.update({data:i}),await I(this.resourceReferences,r,null),g(r),this.portalItem}async _validateAgainstJSONSchema(e,t,i){let o=t.messages.filter(e=>"error"===e.type).map(e=>new u.a(e.name,e.message,e.details));if(i&&i.validationOptions.ignoreUnsupported&&(o=o.filter(e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name)),i.validationOptions.enabled||N){const t=(await r.e(203).then(r.bind(null,675))).validate(e,i.portalItemLayerType);if(t.length>0){const e="Layer item did not validate:\n"+t.join("\n");if(R.error("_validateAgainstJSONSchema(): "+e),"throw"===i.validationOptions.failPolicy){const e=t.map(e=>new u.a("sceneservice:schema-validation",e)).concat(o);throw new u.a("sceneservice-validate:error","Failed to save layer item due to schema validation, see `details.errors`.",{combined:e})}}}if(o.length>0)throw new u.a("sceneservice:save","Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:o})}};return Object(i.a)([Object(s.b)({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),Object(i.a)([Object(s.b)({type:j.a})],t.prototype,"spatialReference",void 0),Object(i.a)([Object(n.a)("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readSpatialReference",null),Object(i.a)([Object(s.b)({type:O.a})],t.prototype,"fullExtent",void 0),Object(i.a)([Object(n.a)("fullExtent",["store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readFullExtent",null),Object(i.a)([Object(s.b)({readOnly:!0,type:S.a})],t.prototype,"heightModelInfo",void 0),Object(i.a)([Object(s.b)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:{source:"minScale"},write:!1}}}})],t.prototype,"minScale",void 0),Object(i.a)([Object(s.b)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:{source:"maxScale"},write:!1}}}})],t.prototype,"maxScale",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],t.prototype,"version",void 0),Object(i.a)([Object(n.a)("version",["store.version"])],t.prototype,"readVersion",null),Object(i.a)([Object(s.b)({type:String,json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(i.a)([Object(s.b)({type:String,json:{read:!1}})],t.prototype,"sublayerTitleMode",void 0),Object(i.a)([Object(s.b)({type:String})],t.prototype,"title",void 0),Object(i.a)([Object(n.a)("portal-item","title")],t.prototype,"readTitlePortalItem",null),Object(i.a)([Object(n.a)("service","title",["name"])],t.prototype,"readTitleService",null),Object(i.a)([Object(s.b)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{write:{target:"id",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],t.prototype,"layerId",void 0),Object(i.a)([Object(s.b)(P.j)],t.prototype,"url",null),Object(i.a)([Object(c.a)("url")],t.prototype,"writeUrl",null),Object(i.a)([Object(s.b)({dependsOn:["layerId"]})],t.prototype,"parsedUrl",null),Object(i.a)([Object(s.b)({readOnly:!0})],t.prototype,"store",void 0),Object(i.a)([Object(s.b)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],t.prototype,"rootNode",void 0),t=Object(i.a)([Object(l.a)("esri.layers.mixins.SceneService")],t),t},L=-1e38,N=Object(o.a)("esri-debug-messages"),C="Scene Service",A={getTypeKeywords:()=>[],portalItemLayerType:"unknown",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:"throw"}}},423:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return b}));var i=r(24),o=(r(3),r(20),r(7),r(9),r(26)),a=r(69),s=r(25),n=(r(4),r(41),r(42),r(65));let l=class extends n.a{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};Object(i.a)([Object(o.b)({type:Number})],l.prototype,"nodesPerPage",void 0),Object(i.a)([Object(o.b)({type:Number})],l.prototype,"rootIndex",void 0),Object(i.a)([Object(o.b)({type:String})],l.prototype,"lodSelectionMetricType",void 0),l=Object(i.a)([Object(s.a)("esri.layer.support.I3SNodePageDefinition")],l);let c=class extends n.a{constructor(){super(...arguments),this.factor=1}};Object(i.a)([Object(o.b)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],c.prototype,"id",void 0),Object(i.a)([Object(o.b)({type:Number})],c.prototype,"factor",void 0),c=Object(i.a)([Object(s.a)("esri.layer.support.I3SMaterialTexture")],c);let u=class extends n.a{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};Object(i.a)([Object(o.b)({type:[Number]})],u.prototype,"baseColorFactor",void 0),Object(i.a)([Object(o.b)({type:c})],u.prototype,"baseColorTexture",void 0),Object(i.a)([Object(o.b)({type:c})],u.prototype,"metallicRoughnessTexture",void 0),Object(i.a)([Object(o.b)({type:Number})],u.prototype,"metallicFactor",void 0),Object(i.a)([Object(o.b)({type:Number})],u.prototype,"roughnessFactor",void 0),u=Object(i.a)([Object(s.a)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],u);let p=class extends n.a{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};Object(i.a)([Object(a.a)({opaque:"opaque",mask:"mask",blend:"blend"})],p.prototype,"alphaMode",void 0),Object(i.a)([Object(o.b)({type:Number})],p.prototype,"alphaCutoff",void 0),Object(i.a)([Object(o.b)({type:Boolean})],p.prototype,"doubleSided",void 0),Object(i.a)([Object(a.a)({none:"none",back:"back",front:"front"})],p.prototype,"cullFace",void 0),Object(i.a)([Object(o.b)({type:c})],p.prototype,"normalTexture",void 0),Object(i.a)([Object(o.b)({type:c})],p.prototype,"occlusionTexture",void 0),Object(i.a)([Object(o.b)({type:c})],p.prototype,"emissiveTexture",void 0),Object(i.a)([Object(o.b)({type:[Number]})],p.prototype,"emissiveFactor",void 0),Object(i.a)([Object(o.b)({type:u})],p.prototype,"pbrMetallicRoughness",void 0),p=Object(i.a)([Object(s.a)("esri.layer.support.I3SMaterialDefinition")],p);let d=class extends n.a{};Object(i.a)([Object(o.b)({type:String,json:{read:{source:["name","index"],reader:(e,t)=>null!=e?e:""+t.index}}})],d.prototype,"name",void 0),Object(i.a)([Object(a.a)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2"})],d.prototype,"format",void 0),d=Object(i.a)([Object(s.a)("esri.layer.support.I3STextureFormat")],d);let b=class extends n.a{constructor(){super(...arguments),this.atlas=!1}};Object(i.a)([Object(o.b)({type:[d]})],b.prototype,"formats",void 0),Object(i.a)([Object(o.b)({type:Boolean})],b.prototype,"atlas",void 0),b=Object(i.a)([Object(s.a)("esri.layer.support.I3STextureSetDefinition")],b);let y=class extends n.a{};Object(i.a)([Object(a.a)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],y.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:Number})],y.prototype,"component",void 0),y=Object(i.a)([Object(s.a)("esri.layer.support.I3SGeometryAttribute")],y);let h=class extends n.a{};Object(i.a)([Object(a.a)({draco:"draco"})],h.prototype,"encoding",void 0),Object(i.a)([Object(o.b)({type:[String]})],h.prototype,"attributes",void 0),h=Object(i.a)([Object(s.a)("esri.layer.support.I3SGeometryCompressedAttributes")],h);let j=class extends n.a{constructor(){super(...arguments),this.offset=0}};Object(i.a)([Object(o.b)({type:Number})],j.prototype,"offset",void 0),Object(i.a)([Object(o.b)({type:y})],j.prototype,"position",void 0),Object(i.a)([Object(o.b)({type:y})],j.prototype,"normal",void 0),Object(i.a)([Object(o.b)({type:y})],j.prototype,"uv0",void 0),Object(i.a)([Object(o.b)({type:y})],j.prototype,"color",void 0),Object(i.a)([Object(o.b)({type:y})],j.prototype,"uvRegion",void 0),Object(i.a)([Object(o.b)({type:y})],j.prototype,"featureId",void 0),Object(i.a)([Object(o.b)({type:y})],j.prototype,"faceRange",void 0),Object(i.a)([Object(o.b)({type:h})],j.prototype,"compressedAttributes",void 0),j=Object(i.a)([Object(s.a)("esri.layer.support.I3SGeometryBuffer")],j);let O=class extends n.a{};Object(i.a)([Object(a.a)({triangle:"triangle"})],O.prototype,"topology",void 0),Object(i.a)([Object(o.b)()],O.prototype,"geometryBuffers",void 0),O=Object(i.a)([Object(s.a)("esri.layer.support.I3SGeometryDefinition")],O)},527:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(2),o=r(12),a=r(14),s=r(5),n=r(43),l=(r(45),r(91)),c=r(117),u=r(173);class p{constructor(e,t,r){this.parsedUrl=e,this.portalItem=t,this.signal=r,this.rootDocument=null;const i=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);i&&(this.urlParts={root:i[1],layerId:parseInt(i[2],10)})}async fetch(){var e;if(!this.urlParts)return null;const t=null!=(e=this.portalItem)?e:await this.portalItemFromServiceItemId();if(Object(i.g)(t))return this.loadFromUrl();const r=await this.findAndLoadRelatedPortalItem(t);return Object(i.g)(r)?null:this.loadFeatureLayerFromPortalItem(r)}async fetchPortalItem(){var e;if(!this.urlParts)return null;const t=null!=(e=this.portalItem)?e:await this.portalItemFromServiceItemId();return Object(i.g)(t)?null:this.findAndLoadRelatedPortalItem(t)}async fetchRootDocument(){if(Object(i.h)(this.rootDocument))return this.rootDocument;if(Object(i.g)(this.urlParts))return this.rootDocument={},{};const e={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},t=this.urlParts.root+"/SceneServer";try{const r=await Object(n.default)(t,e);this.rootDocument=r.data}catch{this.rootDocument={}}return this.rootDocument}async fetchServiceOwningPortalUrl(){var e;const t=null==(e=o.a)?void 0:e.findServerInfo(this.parsedUrl.path);if(null==t?void 0:t.owningSystemUrl)return t.owningSystemUrl;const r=this.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const e=(await Object(n.default)(r,{query:{f:"json"},responseType:"json",signal:this.signal})).data.owningSystemUrl;if(e)return e}catch(e){Object(s.j)(e)}return null}async findAndLoadRelatedPortalItem(e){try{const t=await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:this.signal});return Object(a.d)(t,e=>"Feature Service"===e.type)||null}catch(e){return Object(s.j)(e),null}}async loadFeatureLayerFromPortalItem(e){await e.load({signal:this.signal});const t=await this.findMatchingAssociatedSublayerUrl(e.url);return new u.default({url:t,portalItem:e}).load({signal:this.signal})}async loadFromUrl(){const e=await this.findMatchingAssociatedSublayerUrl(this.urlParts.root+"/FeatureServer");return new u.default({url:e}).load({signal:this.signal})}async findMatchingAssociatedSublayerUrl(e){const t=e.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),r={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},i=this.urlParts.layerId,o=this.fetchRootDocument(),a=Object(n.default)(t,r),[l,c]=await Object(s.a)([a,o]),u=c&&c.layers,p=l.data&&l.data.layers;if(!Array.isArray(p))throw new Error("expected layers array");if(Array.isArray(u)){for(let e=0;e<Math.min(u.length,p.length);e++)if(u[e].id===i)return`${t}/${p[e].id}`}else if(i<p.length)return`${t}/${p[i].id}`;throw new Error("could not find matching associated sublayer")}async portalItemFromServiceItemId(){const e=(await this.fetchRootDocument()).serviceItemId;if(!e)return null;const t=new c.default({id:e}),r=await this.fetchServiceOwningPortalUrl();Object(i.h)(r)&&(t.portal=new l.a({url:r}));try{return t.load({signal:this.signal})}catch(e){return Object(s.j)(e),null}}}},81:function(e,t,r){"use strict";var i,o=r(24),a=(r(3),r(20),r(7),r(9),r(26)),s=r(68),n=r(25),l=r(66),c=(r(4),r(41),r(42),r(65)),u=r(84);let p=i=class extends c.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return d}static get empty(){return b}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(i.allTime)}get isEmpty(){return this.equals(i.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new i({end:this.end,start:this.start})}intersection(e){var t,r,o,a,s,n,l,c;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const u=null!=(t=null==(r=this.start)?void 0:r.getTime())?t:-1/0,p=null!=(o=null==(a=this.end)?void 0:a.getTime())?o:1/0,d=null!=(s=null==(n=e.start)?void 0:n.getTime())?s:-1/0,b=null!=(l=null==(c=e.end)?void 0:c.getTime())?l:1/0;let y,h;if(d>=u&&d<=p?y=d:u>=d&&u<=b&&(y=u),p>=d&&p<=b?h=p:b>=u&&b<=p&&(h=b),!isNaN(y)&&!isNaN(h)){const e=new i;return e.start=y===-1/0?null:new Date(y),e.end=h===1/0?null:new Date(h),e}return i.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new i,{start:o,end:a}=this;return o&&(r.start=Object(u.b)(o,e,t)),a&&(r.end=Object(u.b)(a,e,t)),r}equals(e){if(!e)return!1;const t=this.start?this.start.getTime():this.start,r=this.end?this.end.getTime():this.end,i=e.start?e.start.getTime():e.start,o=e.end?e.end.getTime():e.end;return t===i&&r===o}};Object(o.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),Object(o.a)([Object(s.a)("end")],p.prototype,"readEnd",null),Object(o.a)([Object(l.a)("end")],p.prototype,"writeEnd",null),Object(o.a)([Object(a.b)({dependsOn:["start","end"],readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),Object(o.a)([Object(a.b)({dependsOn:["start","end"],readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),Object(o.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),Object(o.a)([Object(s.a)("start")],p.prototype,"readStart",null),Object(o.a)([Object(l.a)("start")],p.prototype,"writeStart",null),p=i=Object(o.a)([Object(n.a)("esri.TimeExtent")],p);const d=new p,b=new p({start:void 0,end:void 0});var y=p;t.a=y},84:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return a}));r(37);var i=r(67);const o={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},a=Object(i.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function s(e,t,r){const i=new Date(e.getTime());if(t&&r){const e=o[r],{getter:a,setter:s,multiplier:n}=e;i[s](i[a]()+t*n)}return i}const n={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8}},92:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return p})),r.d(t,"i",(function(){return h}));var i=r(4),o=r(87);const a=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],s=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),n=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i");function l(e){return!!s.test(e)}function c(e){const t=Object(i.H)(e),r=t.path.match(s)||t.path.match(n);if(!r)return null;const[,o,a,l,c]=r,p=a.indexOf("/");return{title:u(-1!==p?a.slice(p+1):a),serverType:l,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:o}}}function u(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function p(e,t){const r=[];if(e){const t=c(e);t&&t.title&&r.push(t.title)}if(t){const e=u(t);r.push(e)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function d(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function b(e,t){return e?Object(i.F)(Object(i.E)(e,t)):e}function y(e,t,r){if(!t)return{url:t};t=Object(i.E)(t,r);const o=c(Object(i.H)(t).path);let a;return o&&null!=o.sublayer&&(null==e.layerId&&(a=o.sublayer),t=o.url.path),{url:Object(i.F)(t),layerId:a}}function h(e,t,r,a,s){Object(o.f)(t,a,"url",s),a.url&&null!=e.layerId&&(a.url=Object(i.w)(a.url,r,e.layerId.toString()))}function j(e){if(!e)return!1;const t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),i=-1!==t.indexOf("/mapserver/wmsserver"),o=-1!==t.indexOf("/imageserver/wmsserver"),a=-1!==t.indexOf("/wmsserver");return r&&(i||o||a)}},97:function(e,t,r){"use strict";var i=r(24),o=r(2),a=r(26),s=r(25),n=r(30),l=r(74);let c=class extends n.a{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!l.a.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||l.a.isCollection(e)?e.forEach(e=>this._isHandle(e)&&r.push(e)):r.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach(t=>t.forEach(e));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||l.a.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let e=0;e<t.length;e++)t[e].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return Object(o.c)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};Object(i.a)([Object(a.b)({readOnly:!0})],c.prototype,"size",null),c=Object(i.a)([Object(s.a)("esri.core.Handles")],c);var u=c;t.a=u}});