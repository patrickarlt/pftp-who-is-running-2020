self.webpackChunkRemoteClient([78],{209:function(e,n,a){"use strict";a.r(n),a.d(n,"fromUrl",(function(){return o}));a(20);var r=a(2),t=a(10),l=a(14),i=a(43),s=(a(45),a(92)),u=a(268);async function o(e){const n=await async function(e){const n=Object(s.e)(e);if(!n)throw new t.a("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:a,sublayer:r}=n;let l;const i={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(a){case"MapServer":l=null!=r?"FeatureLayer":async function(e){return(await y(e)).tileInfo}(e).then(e=>e?"TileLayer":"MapImageLayer");break;case"ImageServer":l=y(e).then(e=>{const n=e.tileInfo&&e.tileInfo.format;return e.tileInfo?n&&"LERC"===n.toUpperCase()&&e.cacheType&&"elevation"===e.cacheType.toLowerCase()?"ElevationLayer":"ImageryTileLayer":"ImageryLayer"});break;case"SceneServer":l=y(n.url.path).then(e=>{const n={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const a=e.layers[0].layerType;if(null!=n[a])return n[a]}return"SceneLayer"});break;default:l=i[a]}const o="FeatureServer"===a,c={parsedUrl:n,Constructor:null,layerOrTableId:o?r:null,sublayerIds:null,tableIds:null},f=await l;if({FeatureLayer:!0,SceneLayer:!0}[f]&&null==r){const n=await async function(e,n){var a,r;let t,l=!1;if("FeatureServer"===n){const n=await async function(e){var n,a;let r=await y(e);r=r||{},r.layers=(null==(n=r.layers)?void 0:n.filter(d))||[];const t={serviceJSON:r};if(r.currentVersion<10.5)return t;const l=await y(e+"/layers");return t.layersJSON={layers:(null==l||null==(a=l.layers)?void 0:a.filter(d))||[],tables:(null==l?void 0:l.tables)||[]},t}(e);l=!!n.layersJSON,t=n.layersJSON||n.serviceJSON}else t=await y(e);const i=null==(a=t)?void 0:a.layers,s=null==(r=t)?void 0:r.tables;return{layerIds:(null==i?void 0:i.map(e=>e.id).reverse())||[],tableIds:(null==s?void 0:s.map(e=>e.id).reverse())||[],layerInfos:l?i:[],tableInfos:l?s:[]}}(e,a);if(o&&(c.sublayerInfos=n.layerInfos,c.tableInfos=n.tableInfos),1!==n.layerIds.length+n.tableIds.length)c.sublayerIds=n.layerIds,c.tableIds=n.tableIds;else if(o){var b,h;c.layerOrTableId=null!=(b=n.layerIds[0])?b:n.tableIds[0],c.sourceJSON=null!=(h=n.layerInfos[0])?h:n.tableInfos[0]}}return c.Constructor=await async function(e){return(0,u.a[e])()}(f),c}(e.url),l={...e.properties,url:e.url};if(!n.sublayerIds)return null!=n.layerOrTableId&&(l.layerId=n.layerOrTableId,l.sourceJSON=n.sourceJSON),new n.Constructor(l);const i=new(0,(await a.e(20).then(a.bind(null,373))).default)({title:n.parsedUrl.title});return function(e,n,a){function t(e,t){const l={...a,layerId:e,sublayerTitleMode:"service-name"};return Object(r.h)(t)&&(l.sourceJSON=t),new n.Constructor(l)}n.sublayerIds.forEach(a=>{const r=t(a,c(n.sublayerInfos,a));e.add(r)}),n.tableIds.forEach(a=>{const r=t(a,c(n.tableInfos,a));e.tables.add(r)})}(i,n,l),i}function c(e,n){return e?Object(l.d)(e,e=>e.id===n):null}function d(e){return!e.type||"Feature Layer"===e.type}async function y(e){return(await Object(i.default)(e,{responseType:"json",query:{f:"json"}})).data}},268:function(e,n,a){"use strict";a.d(n,"a",(function(){return r}));a(20);const r={BingMapsLayer:async()=>(await a.e(48).then(a.bind(null,453))).default,BuildingSceneLayer:async()=>(await Promise.all([a.e(1),a.e(2),a.e(17),a.e(73)]).then(a.bind(null,437))).default,CSVLayer:async()=>(await Promise.all([a.e(1),a.e(2),a.e(40)]).then(a.bind(null,454))).default,ElevationLayer:async()=>(await Promise.all([a.e(5),a.e(19)]).then(a.bind(null,447))).default,FeatureLayer:async()=>(await Promise.all([a.e(1),a.e(2),a.e(44)]).then(a.bind(null,173))).default,GroupLayer:async()=>(await Promise.all([a.e(20),a.e(143)]).then(a.bind(null,373))).default,GeoRSSLayer:async()=>(await a.e(51).then(a.bind(null,424))).default,ImageryLayer:async()=>(await Promise.all([a.e(9),a.e(18),a.e(36)]).then(a.bind(null,439))).default,ImageryTileLayer:async()=>(await Promise.all([a.e(5),a.e(9),a.e(18),a.e(74)]).then(a.bind(null,438))).default,IntegratedMeshLayer:async()=>(await Promise.all([a.e(24),a.e(45)]).then(a.bind(null,443))).default,KMLLayer:async()=>(await Promise.all([a.e(1),a.e(57)]).then(a.bind(null,449))).default,MapImageLayer:async()=>(await Promise.all([a.e(14),a.e(1),a.e(11),a.e(15),a.e(56)]).then(a.bind(null,436))).default,MapNotesLayer:async()=>(await Promise.all([a.e(1),a.e(2),a.e(42)]).then(a.bind(null,425))).default,OpenStreetMapLayer:async()=>(await Promise.all([a.e(12),a.e(197)]).then(a.bind(null,426))).default,PointCloudLayer:async()=>(await a.e(39).then(a.bind(null,440))).default,RouteLayer:async()=>(await Promise.all([a.e(1),a.e(2),a.e(43)]).then(a.bind(null,427))).default,SceneLayer:async()=>(await Promise.all([a.e(1),a.e(2),a.e(17),a.e(198)]).then(a.bind(null,455))).default,StreamLayer:async()=>(await Promise.all([a.e(1),a.e(38)]).then(a.bind(null,456))).default,TileLayer:async()=>(await Promise.all([a.e(1),a.e(5),a.e(11),a.e(58)]).then(a.bind(null,428))).default,UnknownLayer:async()=>(await a.e(67).then(a.bind(null,429))).default,UnsupportedLayer:async()=>(await a.e(68).then(a.bind(null,430))).default,VectorTileLayer:async()=>(await Promise.all([a.e(5),a.e(26),a.e(49)]).then(a.bind(null,441))).default,WebTileLayer:async()=>(await a.e(12).then(a.bind(null,316))).default,WMSLayer:async()=>(await a.e(41).then(a.bind(null,446))).default,WMTSLayer:async()=>(await Promise.all([a.e(12),a.e(142)]).then(a.bind(null,444))).default}},92:function(e,n,a){"use strict";a.d(n,"a",(function(){return c})),a.d(n,"b",(function(){return u})),a.d(n,"c",(function(){return y})),a.d(n,"d",(function(){return w})),a.d(n,"e",(function(){return o})),a.d(n,"f",(function(){return f})),a.d(n,"g",(function(){return b})),a.d(n,"h",(function(){return d})),a.d(n,"i",(function(){return h}));var r=a(4),t=a(87);const l=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],i=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${l.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),s=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${l.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i");function u(e){return!!i.test(e)}function o(e){const n=Object(r.H)(e),a=n.path.match(i)||n.path.match(s);if(!a)return null;const[,t,l,u,o]=a,d=l.indexOf("/");return{title:c(-1!==d?l.slice(d+1):l),serverType:u,sublayer:null!=o&&""!==o?parseInt(o,10):null,url:{path:t}}}function c(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function d(e,n){const a=[];if(e){const n=o(e);n&&n.title&&a.push(n.title)}if(n){const e=c(n);a.push(e)}if(2===a.length){if(-1!==a[0].toLowerCase().indexOf(a[1].toLowerCase()))return a[0];if(-1!==a[1].toLowerCase().indexOf(a[0].toLowerCase()))return a[1]}return a.join(" - ")}function y(e){if(!e)return!1;const n=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),a=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return n&&a}function f(e,n){return e?Object(r.F)(Object(r.E)(e,n)):e}function b(e,n,a){if(!n)return{url:n};n=Object(r.E)(n,a);const t=o(Object(r.H)(n).path);let l;return t&&null!=t.sublayer&&(null==e.layerId&&(l=t.sublayer),n=t.url.path),{url:Object(r.F)(n),layerId:l}}function h(e,n,a,l,i){Object(t.f)(n,l,"url",i),l.url&&null!=e.layerId&&(l.url=Object(r.w)(l.url,a,e.layerId.toString()))}function w(e){if(!e)return!1;const n=e.toLowerCase(),a=-1!==n.indexOf("/services/"),r=-1!==n.indexOf("/mapserver/wmsserver"),t=-1!==n.indexOf("/imageserver/wmsserver"),l=-1!==n.indexOf("/wmsserver");return a&&(r||t||l)}}});